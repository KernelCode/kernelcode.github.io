var userid='VMYb7z1rdGoi2H5m'
var api='gf2SNpsvqizRPzv8tNbQycYcaBJVEdKU';var nick="none";writing=!1;var input="";COMMANDS_STACK=Array();COMMANDS_STACK_INDEX=-1;var RESID=0;SHUT_DOWN=!1;KEBOARD_SOUNDS=1;ptr_interval=setInterval(function(){if(SHUT_DOWN){window.clearInterval(ptr_interval)}
if(!writing){if(document.querySelector("#ptr").style.opacity=="0")
document.querySelector("#ptr").style.opacity=1;else document.querySelector("#ptr").style.opacity=0}else{document.querySelector("#ptr").style.opacity=1}},500);setInterval(function(){var str=filter_str(document.querySelector("#hidden-input").value);document.querySelector("#command").innerHTML=str},10);function filter_str(str){str=str.replace("<","");str=str.replace(">","");return str}
function rands_n(max,min){return Math.floor(Math.random()*(max-min+1))+min}
function MainConsole(event){KEBOARD_SOUNDS=rands_n(6,1);if(SHUT_DOWN){return}
if(event.keyCode==38){if(COMMANDS_STACK_INDEX>=0&&COMMANDS_STACK_INDEX<COMMANDS_STACK.length){input=COMMANDS_STACK[COMMANDS_STACK_INDEX];COMMANDS_STACK_INDEX--}else{COMMANDS_STACK_INDEX=COMMANDS_STACK.length-1}
return}
if(event.keyCode==40){if(COMMANDS_STACK_INDEX>=0&&COMMANDS_STACK_INDEX<COMMANDS_STACK.length){input=COMMANDS_STACK[COMMANDS_STACK_INDEX];COMMANDS_STACK_INDEX++}else{COMMANDS_STACK_INDEX=0}
return}
if(event.keyCode==13){COMMANDS_STACK.push(input);COMMANDS_STACK_INDEX=COMMANDS_STACK.length-1;var str=filter_str(document.querySelector("#hidden-input").value);process(str.trim(str).toLowerCase());input="";return}}
function insertAfter(newNode,referenceNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}
function removeIdsAndClass(){command_line=document.getElementById("command_line");command=document.getElementById("command");ptr=document.getElementById("ptr");res=document.getElementById("res");resdate=document.getElementById("res-date");thinking=document.getElementById("thinking");thinking.className="";thinking.id="";thinking.style.display="none";command_line.className="";command_line.id="";command_line.style.opacity="0.5";ptr.className="";ptr.id="";ptr.style.opacity="0.5";resAry=document.getElementsByClassName("respons");for(var i=0;i<resAry.length-1;i++){resAry[i].style.opacity="0.5";resAry[i].id=""}
res.id="";res.style.opacity="0.8";resdate.id="";resdate.style.opacity="0.8";resAry[resAry.length-1].style.opacity="1";command.className="";command.id=""}
function getNewCommandLine(){code=document.createElement("code");code.innerHTML='<code><div class="command_line" id="command_line"><span style="">User@<span style="color:#eee">HAL9000</span> <span style="color:#f55">:~$ </span></span><span id="command" style="color:#eee"></span><span id="ptr">|</span></div><span id="res-date" style="color:#777;font-size:8px"></span><span id="res" style="color:#7f7"></span><div style="display:none" id=\'thinking\'></div></code>  ';codesAry=document.getElementsByTagName("code");codesAry[codesAry.length-1].parentNode.insertBefore(code,codesAry[codesAry.length-1].nextSibling)}
function process(str){if(str.length<2)
return;writeThis(str,"res");think(!0);playSound("wting");RESID++;switch(str){case "clear":input="";document.getElementById("res").innerHTML="";think(!1);break;case "info":writeAnswer("if you want to contact abdullah altahery just send a msg : abdullahaltahery@gmail.com ");break;case "cls":input="";document.getElementById("res").innerHTML="";think(!1);break;case "hi":writeAnswer("Hello! , what do you want to know ? ");break;case "ls":writeAnswer("U are not allowed to access this information!");break;case "shutdown":writeAnswer("i am not your robot . the three laws of robotics don't allow me to obey your shitty commands!.");break;default:process_lang(str);break}
document.querySelector("#hidden-input").value=""}
var xhttp=new XMLHttpRequest();function post(data,refunc,erfunc){xhttp.open("POST",data.url,!0);xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(nick!=="none"){xhttp.send("user="+data.user+"&key="+data.key+"&nick="+data.nick+"&text="+data.text)}else{xhttp.send("user="+data.user+"&key="+data.key+"&text="+data.text)}
var called=!1;xhttp.onreadystatechange=function(){if(!called){refunc(this);called=!0}}}
post({url:"https://cleverbot.io/1.0/create",user:userid,key:api},function(xhp){if(xhp.status==200){nick=JSON.parse(xhp.responseText).nick}});function process_lang(str){var error_msgs=["Syntax error!","Error while tying to connect to my brain!","Errors everywhere , bro!","Somthing's wrong with your computer!","Connection lost!"]
post({url:"https://cleverbot.io/1.0/ask",user:userid,key:api,nick:nick,"text":str},function(xhp){if(xhp.status==200){if(nick==""){nick=xhp.nick;console.log(xhp)}
writeAnswer(JSON.parse(xhp.responseText).response)}else{console.log(xhp.status);writeAnswer(error_msgs[rands_n(error_msgs.length-1,0)])}})}
function writeAnswer(str,color){input="";document.getElementById("res-date").innerHTML=" "+(new Date()).toLocaleTimeString()+" ";if(!color)
color="yellow";setTimeout(function(){document.getElementById("res").innerHTML+='<span style="color:#777;font-size:8px" id="date'+RESID+'" ></span><span class="respons" id="me'+RESID+'" style="color:'+color+'"></span>';writeThis(str,"me"+RESID);writeThis(" "+(new Date()).toLocaleTimeString()+" ","date"+RESID,!0);playSound("a");think(!1);setTimeout(function(){try{var msg=new SpeechSynthesisUtterance();var voices=window.speechSynthesis.getVoices();msg.voice=voices[10];msg.voiceURI='native';msg.volume=1;msg.rate=0.5;msg.pitch=0.5;msg.text=str;msg.lang='en-US';window.speechSynthesis.speak(msg)}
catch(err){}
removeIdsAndClass();getNewCommandLine()},1000)},1100)}
function writeThis(str,id,fast){var i=0;if(fast){document.getElementById(id).innerHTML+=str;document.getElementById(id).innerHTML+=" ";return}
var win=setInterval(function(){if(i>str.length-1){document.getElementById(id).innerHTML+="<br>";window.clearInterval(win);return}
document.getElementById(id).innerHTML+=str[i];i++},30)}
function think(yes){if(yes){document.getElementById("thinking").style.display="block"}else{document.getElementById("thinking").style.display="none"}}
function thinking(){var t=['|',"\\","-","/","|"];var i=0;var ti=setInterval(function(){if(i>t.length-1)
i=0;else document.getElementById("thinking").innerHTML=t[i];i++},100)}
thinking();setTimeout(function(){input="";document.getElementById("command").innerHTML=""},200);function playSound(filename){var snd=new Audio("./res/"+filename+".mp3");snd.play()}
